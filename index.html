<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Danh sách Đình Chùa</title>
</head>
<body>
<h1>Danh sách Đình Chùa</h1>

<ul id="list"></ul>

<h2>Thêm dữ liệu</h2>
<form id="addForm">
  <input type="text" id="name" placeholder="Tên" required><br>
  <textarea id="description" placeholder="Mô tả" required></textarea><br>
  <input type="text" id="lat" placeholder="Latitude" required><br>
  <input type="text" id="lng" placeholder="Longitude" required><br>
  <input type="text" id="images" placeholder="Hình ảnh (vd: img.jpg)"><br>
  <button type="submit">Thêm</button>
</form>

<script>
const webAppUrl = 'https://script.google.com/macros/s/AKfycbz80hpSju9Q8xoiqYKDvrXebVijZEKbqOXZLUjFsXjYGeCRhvueL6dpiSELUOnixD0_DQ/exec';

// --- load danh sách ---
fetch(webAppUrl)
  .then(res => res.json())
  .then(data => {
    const list = document.getElementById('list');
    data.forEach(item => {
      const li = document.createElement('li');
      li.innerHTML = `<b>${item.name}</b>: ${item.description} (Lat: ${item.lat}, Lng: ${item.lng})`;
      list.appendChild(li);
    });
  })
  .catch(err => console.error(err));

// --- thêm dữ liệu ---
document.getElementById('addForm').addEventListener('submit', function(e){
  e.preventDefault();
  const payload = {
    name: document.getElementById('name').value,
    description: document.getElementById('description').value,
    lat: document.getElementById('lat').value,
    lng: document.getElementById('lng').value,
    images: document.getElementById('images').value
  };

  fetch(webAppUrl, {
    method: 'POST',
    mode: 'no-cors',  // tránh lỗi CORS
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(payload)
  })
  .then(() => {
    alert('Đã gửi dữ liệu (chưa nhận phản hồi do no-cors)');
    // Reset form
    document.getElementById('addForm').reset();
  })
  .catch(err => console.error(err));
});
</script>
</body>
</html>
